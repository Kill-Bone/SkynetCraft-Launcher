<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>SkynetCraft Launcher</title>
    <style>
        :root {
            --primary: #2ecc71;
            --glass: rgba(12, 14, 20, 0.98);
            --border: rgba(255, 255, 255, 0.08);
        }

        body {
            margin: 0; padding: 0;
            background: transparent;
            font-family: 'Segoe UI', sans-serif;
            display: flex; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden;
        }

        .launcher-card {
            width: 320px;
            background: var(--glass);
            backdrop-filter: blur(40px);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 45px;
            box-shadow: 0 40px 100px rgba(0, 0, 0, 0.9);
            text-align: center;
            position: relative;
            -webkit-app-region: drag;
        }

        .window-controls {
            position: absolute; top: 25px; right: 30px;
            -webkit-app-region: no-drag;
        }

        .control-btn {
            background: none; border: none; color: #333;
            font-size: 20px; cursor: pointer; padding: 5px;
        }
        .control-btn:hover { color: var(--primary); }

        h1 { font-size: 26px; margin: 0 0 40px 0; color: white; letter-spacing: 4px; font-weight: 900; }
        h1 span { color: var(--primary); }

        .tab-group {
            display: flex;
            margin-bottom: 25px;
            background: rgba(255,255,255,0.03);
            border-radius: 15px;
            padding: 5px;
            -webkit-app-region: no-drag;
        }

        .tab {
            flex: 1; padding: 10px; font-size: 10px; color: #555;
            cursor: pointer; transition: 0.3s; border-radius: 10px;
            font-weight: 800; letter-spacing: 1px;
        }

        .tab.active { background: var(--primary); color: #000; }

        .form-group { display: flex; flex-direction: column; gap: 15px; -webkit-app-region: no-drag; }

        input {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            padding: 16px; border-radius: 18px;
            color: white; outline: none; transition: 0.4s;
            font-size: 13px; text-align: center;
        }
        input:focus { border-color: var(--primary); background: rgba(255,255,255,0.06); }

        #confirm-pass { display: none; }

        .launch-btn {
            background: var(--primary); color: #000;
            border: none; padding: 20px; border-radius: 20px;
            font-weight: 900; cursor: pointer; margin-top: 10px;
            transition: 0.3s; font-size: 14px; letter-spacing: 1px;
        }
        .launch-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(46, 204, 113, 0.4); }

        /* A státusz sáv szöveg nélkül */
        .status-box { margin-top: 40px; }
        #status-txt { font-size: 9px; color: #333; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 10px; min-height: 12px; }
        .bar-bg { height: 2px; background: rgba(255,255,255,0.02); border-radius: 1px; overflow: hidden; }
        .bar-fill { width: 0%; height: 100%; background: var(--primary); transition: 0.5s; }
    </style>
</head>
<body>

    <div class="launcher-card">
        <div class="window-controls">
            <button class="control-btn" onclick="ipcRenderer.send('minimize-app')">_</button>
            <button class="control-btn" onclick="ipcRenderer.send('close-app')">×</button>
        </div>

        <h1>SKYNET<span>CRAFT</span></h1>
        
        <div class="tab-group">
            <div class="tab active" id="login-tab">BEJELENTKEZÉS</div>
            <div class="tab" id="reg-tab">REGISZTRÁCIÓ</div>
        </div>

        <div class="form-group">
            <input type="text" id="username" placeholder="Felhasználónév">
            <input type="password" id="password" placeholder="Jelszó">
            <input type="password" id="confirm-pass" placeholder="Jelszó megerősítése">
            <button class="launch-btn" id="btn-launch">INDÍTÁS</button>
        </div>

        <div class="status-box">
            <div id="status-txt"></div> <div class="bar-bg"><div class="bar-fill" id="fill"></div></div>
        </div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');

        const loginTab = document.getElementById('login-tab');
        const regTab = document.getElementById('reg-tab');
        const confirmInput = document.getElementById('confirm-pass');
        const btn = document.getElementById('btn-launch');
        const fill = document.getElementById('fill');
        const status = document.getElementById('status-txt');

        loginTab.onclick = () => {
            loginTab.classList.add('active'); regTab.classList.remove('active');
            confirmInput.style.display = 'none'; btn.innerText = "INDÍTÁS";
        };

        regTab.onclick = () => {
            regTab.classList.add('active'); loginTab.classList.remove('active');
            confirmInput.style.display = 'block'; btn.innerText = "REGISZTRÁCIÓ";
        };

        ipcRenderer.invoke('get-profile').then(data => {
            if(data) {
                document.getElementById('username').value = data.username || '';
                document.getElementById('password').value = data.password || '';
            }
        });

        btn.onclick = () => {
            const user = document.getElementById('username').value;
            if(!user) return;
            // Indításkor megjelenhet egy rövid infó, ha szeretnéd
            status.innerText = "Indítás..."; 
            ipcRenderer.send('save-profile', { 
                username: user, 
                password: document.getElementById('password').value 
            });
        };

        ipcRenderer.on('download-progress', (event, data) => {
            const pct = Math.round(data.task / data.total * 100);
            status.innerText = `Frissítés: ${pct}%`;
            fill.style.width = pct + "%";
        });
    </script>
</body>
</html>